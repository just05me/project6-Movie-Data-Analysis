# Поиск фильмов по датам и рейтингу

Этот проект представляет собой консольное приложение на Python для получения и фильтрации фильмов с использованием API TheMovieDB. Пользователь вводит диапазон дат и минимальный рейтинг, а программа возвращает список подходящих фильмов. Проект включает две версии: с сохранением данных в MySQL (holycode.py) и без сохранения (holycode2_withoutMySQL.py).

## Структура проекта

- holycode.py: Полноценная версия, которая получает фильмы из API, фильтрует их и сохраняет в базу данных MySQL.
- holycode2_withoutMySQL.py: Упрощенная версия, которая выполняет те же функции, но не сохраняет данные в базу данных.
- requestmvenv/: Виртуальное окружение, содержащее все необходимые библиотеки Python.

## Требования

- Python 3.8 или выше
- Ключ API TheMovieDB (необходимо заменить заглушку "APIkey" в коде)
- Для holycode.py: Локально запущенный сервер MySQL с базой данных movies_db

## Установка

1. Склонируйте репозиторий:
   ```
   git clone <URL-репозитория>
   cd <директория-репозитория>
   ```

2. Активируйте виртуальное окружение:
   ```
   source requestmvenv/bin/activate  # Для Linux/Mac
   requestmvenv\Scripts\activate     # Для Windows
   ```

   Примечание: Все необходимые библиотеки (requests, pandas, mysql-connector-python) находятся в виртуальном окружении requestmvenv.

3. Настройте API ключ:
   - Замените "APIkey" в обоих файлах (holycode.py и holycode2_withoutMySQL.py) на ваш ключ TheMovieDB. Получить ключ можно на сайте https://www.themoviedb.org/.

4. Для holycode.py настройте MySQL:
   - Убедитесь, что сервер MySQL запущен.
   - Создайте базу данных movies_db:
     ```
     CREATE DATABASE movies_db;
     ```
   - Обновите учетные данные в holycode.py (по умолчанию: user="root", password="ur password").

## Использование

### holycode2_withoutMySQL.py (без сохранения в БД)

1. Запустите скрипт:
   ```
   python holycode2_withoutMySQL.py
   ```

2. Введите данные:
   - Начальную дату (формат: мм.гггг, например, 01.2020)
   - Конечную дату (формат: мм.гггг, например, 12.2022)
   - Минимальный рейтинг (например, 7.0)

3. Программа:
   - Получит фильмы из API за указанные годы.
   - Отфильтрует их по датам и рейтингу.
   - Выведет список подходящих фильмов в консоль.

### holycode.py (с сохранением в БД)

1. Запустите скрипт:
   ```
   python holycode.py
   ```

2. Введите те же данные, что и для holycode2_withoutMySQL.py.

3. Программа:
   - Выполнит те же шаги, что и holycode2_withoutMySQL.py.
   - Дополнительно сохранит отфильтрованные фильмы в таблицу movies в базе данных movies_db.
   - Выведет сообщение об успешном сохранении.

## Схема базы данных (только для holycode.py)

Программа создает таблицу movies в базе данных movies_db со следующей структурой:

```
CREATE TABLE movies (
    id INT AUTO_INCREMENT PRIMARY KEY,
    title VARCHAR(255),
    rating FLOAT,
    release_date VARCHAR(50)
);
```

- id: Уникальный идентификатор записи.
- title: Название фильма.
- rating: Средний рейтинг фильма.
- release_date: Дата выхода фильма.

## Настройка

- API ключ: Обязательно замените "APIkey" в обоих файлах на действительный ключ TheMovieDB.
- Даты: Формат ввода — мм.гггг (например, 01.2020). Убедитесь, что даты корректны.
- Для holycode.py:
  - Настройте параметры подключения к MySQL в holycode.py (host, user, password, database), если они отличаются.
  - Замените password="ur password" на действительный пароль MySQL.

## Примечания

- Виртуальное окружение requestmvenv содержит все зависимости, поэтому установка дополнительных библиотек не требуется.
- Если API ключ недействителен, программа не сможет получить данные. Зарегистрируйтесь на https://www.themoviedb.org/ для получения ключа.
- Для holycode.py убедитесь, что сервер MySQL работает и база данных movies_db создана перед запуском.
- Версия holycode2_withoutMySQL.py легче в использовании, так как не требует настройки MySQL.
- API TheMovieDB может возвращать ограниченное количество фильмов за один запрос (до 20). Для полной функциональности рекомендуется использовать пагинацию (не реализована в текущей версии).
